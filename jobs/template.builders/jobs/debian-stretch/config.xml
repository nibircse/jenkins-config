<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <jenkins.model.BuildDiscarderProperty>
      <strategy class="hudson.tasks.LogRotator">
        <daysToKeep>1</daysToKeep>
        <numToKeep>5</numToKeep>
        <artifactDaysToKeep>-1</artifactDaysToKeep>
        <artifactNumToKeep>-1</artifactNumToKeep>
      </strategy>
    </jenkins.model.BuildDiscarderProperty>
  </properties>
  <scm class="hudson.plugins.git.GitSCM" plugin="git@3.3.2">
    <configVersion>2</configVersion>
    <userRemoteConfigs>
      <hudson.plugins.git.UserRemoteConfig>
        <url>https://github.com/subutai-io/templates</url>
      </hudson.plugins.git.UserRemoteConfig>
    </userRemoteConfigs>
    <branches>
      <hudson.plugins.git.BranchSpec>
        <name>*/jenkins</name>
      </hudson.plugins.git.BranchSpec>
    </branches>
    <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
    <submoduleCfg class="list"/>
    <extensions/>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers/>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command>#bash -c &quot;/home/admin/templates/do-build debian-stretch&quot;

ssh root@172.31.0.253 &lt;&lt;- EOF
rm -rf templates &amp;&amp; git clone https://github.com/subutai-io/templates
cd templates &amp;&amp; sh debian-stretch
EOF</command>
    </hudson.tasks.Shell>
    <hudson.tasks.Shell>
      <command>ssh root@172.31.0.253 &lt;&lt;- EOF
set +x
export URL=&quot;https://cdn.subutai.io:8338/kurjun/rest&quot;
export EMAIL=&quot;subutai@subut.ai&quot;

curl -k &quot;$URL/auth/token?user=$USER&quot; -o /tmp/filetosign
rm -rf /tmp/filetosign.asc
gpg --armor -u $EMAIL --clearsign /tmp/filetosign

SIGNED_AUTH_ID=$(cat /tmp/filetosign.asc)

echo &quot;Auth id obtained and signed\\n$SIGNED_AUTH_ID&quot;

TOKEN=$(curl -k -s -Fmessage=&quot;$SIGNED_AUTH_ID&quot; -Fuser=$USER &quot;$URL/auth/token&quot;)

echo &quot;Token obtained $TOKEN&quot;

EOF
</command>
    </hudson.tasks.Shell>
  </builders>
  <publishers/>
  <buildWrappers>
    <hudson.plugins.ws__cleanup.PreBuildCleanup plugin="ws-cleanup@0.33">
      <deleteDirs>false</deleteDirs>
      <cleanupParameter></cleanupParameter>
      <externalDelete></externalDelete>
    </hudson.plugins.ws__cleanup.PreBuildCleanup>
  </buildWrappers>
</project>